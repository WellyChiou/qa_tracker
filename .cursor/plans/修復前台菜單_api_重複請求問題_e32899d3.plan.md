---
name: 修復前台菜單 API 重複請求問題
overview: "移除 App.vue 中 onMounted 的重複調用，因為 watch 已經有 immediate: true 會在掛載時執行"
todos: []
---

# 清理和整合 MD 與 SQL 檔案

## 分析結果

### 1. 根目錄下的診斷 SQL 檔案（需要整合）

這些檔案是臨時診斷用的，應該整合到一個目錄：

- `check_config.sql` - 檢查 LINE Bot 配置
- `check_members.sql` - 檢查成員
- `check_old_jobs.sql` - 檢查舊任務
- `check-frontend-menus.sql` - 檢查前台菜單
- `diagnose_scheduled_jobs.sql` - 診斷定時任務
- `cleanup_orphaned_executions.sql` - 清理孤立執行記錄
- `remove_old_jobs.sql` - 移除舊任務

**方案**：創建 `mysql/diagnostics/` 目錄，將這些檔案移動過去，並創建一個整合的診斷腳本。

### 2. 根目錄下的 MD 檔案（需要整合或刪除）

- `DEPLOYMENT_WITH_PREVENTION.md` - 可能與 `docs/deployment/` 重複
- `FRONTEND_QUICK_FIX.md` - 可能與 `docs/FRONTEND_TROUBLESHOOTING.md` 重複
- `MANUAL_DB_UPDATE.md` - 應該移到 `docs/` 或 `mysql/`
- `權限系統架構說明.md` - 應該移到 `docs/admin/` 或整合到現有文檔

### 3. docs/ 目錄下的重複或過時文檔

根據 `docs/README.md`，有些文檔可能重複：

- `docs/MIGRATE_MYSQL_VOLUME.md` 和 `docs/MIGRATE_FROM_VOLUME.md` - 可能重複
- `docs/FORCE_REMOVE_VOLUME.md` 和 `docs/SAFE_VOLUME_REMOVAL.md` - 可能重複
- `docs/CLEANUP_VOLUMES.md` - 可能與上述重複
- `docs/VOLUME_MIGRATION_COMPLETE.md` - 可能是完成後的狀態文檔，可以整合

### 4. mysql/ 目錄下的檔案（根據 README.md）

根據 `mysql/README.md`，已經列出了可以刪除的檔案，但這些檔案可能已經不存在了。需要檢查並刪除實際存在的過時檔案。

## 執行計劃

### 階段 1：整合根目錄的診斷 SQL 檔案

1. 創建 `mysql/diagnostics/` 目錄
2. 移動所有診斷 SQL 檔案到該目錄
3. 創建 `mysql/diagnostics/README.md` 說明這些檔案的用途
4. 創建一個整合的診斷腳本 `mysql/diagnostics/run-all-checks.sql`

### 階段 2：整理根目錄的 MD 檔案

1. 檢查 `DEPLOYMENT_WITH_PREVENTION.md` 是否與 `docs/deployment/` 重複，如果重複則刪除
2. 檢查 `FRONTEND_QUICK_FIX.md` 是否與 `docs/FRONTEND_TROUBLESHOOTING.md` 重複，如果重複則刪除或整合
3. 將 `MANUAL_DB_UPDATE.md` 移到 `docs/` 或 `mysql/`
4. 將 `權限系統架構說明.md` 移到 `docs/admin/` 或整合到現有文檔

### 階段 3：整合 docs/ 目錄下的重複文檔

1. 檢查並整合 MySQL Volume 遷移相關的文檔
2. 刪除重複或過時的文檔
3. 更新 `docs/README.md` 的索引

### 階段 4：清理 mysql/ 目錄

1. 根據 `mysql/README.md` 的說明，檢查並刪除已整合的過時 SQL 檔案
2. 整理剩餘的 SQL 檔案，確保分類清晰

## 修改文件

### 新增文件

- `mysql/diagnostics/README.md` - 診斷腳本說明
- `mysql/diagnostics/run-all-checks.sql` - 整合所有診斷檢查

### 移動文件

- 根目錄的診斷 SQL → `mysql/diagnostics/`
- `MANUAL_DB_UPDATE.md` → `docs/` 或 `mysql/`
- `權限系統架構說明.md` → `docs/admin/`

### 刪除文件

- 重複的 MD 文檔
- 過時的 SQL 檔案（根據 README.md 的說明）

### 更新文件

- `docs/README.md` - 更新索引
- `mysql/README.md` - 更新說明